{% extends 'base.html' %}
{% block content %}

{% if no_results > 0 %}
    We have searched your area: {{ area }}<br>
    <br>
    <br>
    {% if not area_trend %}
        The median property price is ${{ median_price[1]  }}.<br>
        <br>
    {% endif %}
    The 25% percentile price is ${{  percent_25_price[1]  }}.<br>
    <br>
    The 75% percentile price is ${{  percent_75_price[1]  }}.
    <br>
    <br>
    <br>

    {% for year, avgPrice, homeCount, medPrice in area_trend %}

        Year {{ year }}, average price {{ avgPrice }}, home count {{ homeCount }}, median price {{ medPrice }}.<br>
        <br>
    {% endfor %}
    <button type="button", id='saved-search', value = "{{ search_params }}" > Save this search</button>
{% else %}

    Sorry, no results, please search again.<br>
{% endif %}



<script>
    "use strict";

    function handleSave(evt) {
        let search_params = document.getElementById("saved-search").value;
        console.log(search_params)
        $.post('/search', {save_type : "search", save_data: search_params }, function (data) {
            $('#saved-search').text('Search saved');
            $('#saved-search').attr('disabled', true);
            console.log(data);
        });
    }

    $('#saved-search').on('click', handleSave);

</script>
{% endblock %}